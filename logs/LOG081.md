## LOG081 - Continuação da Implementação de Melhorias na Visualização de Markdown

### Descrição
Esta tarefa continuou o trabalho de aprimoramento da funcionalidade de pré-visualização de Markdown, focando na correção de problemas de renderização de componentes HTML customizados como `<span>`, `<sub>`, `<sup>` e cores, especificamente na plataforma Windows.

### Alterações Realizadas
1.  **`lib/features/bloquinho/widgets/enhanced_markdown_preview_widget.dart`**:
    *   **`SubBuilder` e `SupBuilder`**: Foram ajustados para usar `RichText` com `WidgetSpan` e `Transform.translate` para um posicionamento mais preciso e escalonamento de fonte adequado para subscritos e sobrescritos.
    *   **`StyledSpanBuilder`**: A lógica de parsing de estilos CSS no método `_parseStyle` foi revisada para garantir que todas as propriedades (cores, background-color, padding, border-radius, etc.) sejam corretamente extraídas e aplicadas aos widgets `Text` ou `Container` resultantes.
    *   **`MermaidBuilder`**: A inicialização do `WebViewController` foi simplificada para usar a abordagem padrão, resolvendo problemas de compatibilidade entre plataformas e erros de build relacionados a pacotes específicos do `webview_flutter`.

2.  **`lib/features/bloquinho/models/bloquinho_slash_command.dart`**:
    *   As templates Markdown para fórmulas LaTeX foram atualizadas para usar raw strings (prefixo `r`) para evitar problemas de interpolação do caractere `$` no Dart, que é parte da sintaxe LaTeX.

3.  **`lib/features/bloquinho/widgets/markdown_examples_widget.dart`**:
    *   O conteúdo de exemplo foi atualizado para usar raw strings para as seções de LaTeX, garantindo que as fórmulas sejam passadas literalmente para o parser.

### Problemas Encontrados e Soluções
*   **Renderização incorreta de `<sub>` e `<sup>`**: O problema foi resolvido ajustando os `MarkdownElementBuilder`s correspondentes para usar `RichText` e `WidgetSpan` com `Transform.translate`, permitindo um controle mais preciso sobre o posicionamento e tamanho da fonte.
*   **Problemas de interpolação de `$` em strings LaTeX**: Resolvido com a utilização de raw strings (`r'''...'''`) nas templates Markdown, o que impede o Dart de interpretar o `$` como um caractere de interpolação.
*   **Erros de build relacionados ao `webview_flutter`**: A tentativa de adicionar dependências específicas de plataforma (`webview_flutter_windows`, `webview_flutter_android`, `webview_flutter_wkwebview`) causou falhas na resolução de pacotes. A solução foi reverter essas adições e simplificar a inicialização do `WebViewController` para usar a API genérica do `webview_flutter`, que é mais compatível e menos propensa a erros de dependência.

### Verificação
Após as alterações, o aplicativo foi executado com sucesso no Windows (`flutter run -d windows`). A pré-visualização de Markdown agora exibe corretamente:
*   Cores de texto e fundo com HTML customizado.
*   Fórmulas LaTeX inline e em bloco.
*   Diagramas Mermaid (renderizados via WebView).
*   Elementos HTML avançados como `<details>`, `<kbd>`, `<sub>`, `<sup>`, e barras de progresso.

## Estado **Não Submetido para Github**